# test_Standart
Тестовое задание в СТАНДАРТ

## 1. Уровень моделей (Models Layer)
Отвечает за работу с базой данных:

ORM (SQLAlchemy): Используется для управления данными.
Модели:
User: данные о пользователях, такие как баланс, URL для вебхуков и ставка комиссии.
Transaction: операции с суммой, комиссией и статусом.
Местоположение: models.py

## 2. Уровень сервисов (Service Layer)
Логика бизнес-процессов:

Логика создания транзакций (расчет комиссии, изменение статуса).
Проверка условий (например, истекшие транзакции через Celery).
Вызов вебхуков.
Местоположение: services/transaction_service.py

## 3. Уровень API (API Layer)
Взаимодействие с клиентами через REST API:

Реализован с использованием Flask-RESTful.
Три эндпоинта:
/create_transaction: Создание транзакции.
/cancel_transaction: Отмена транзакции.
/check_transaction: Проверка статуса транзакции.
Swagger описывает доступные методы.
Местоположение: api/

## 4. Уровень фреймворка (Framework Layer)
Поддержка ядра приложения:

Flask отвечает за маршрутизацию, создание контекста и обработку запросов.
Flask-Admin создает интерфейс админки для управления пользователями и транзакциями.
Flask-SQLAlchemy обеспечивает интеграцию базы данных.
Местоположение: app.py

## 5. Задачи в фоне (Background Tasks)
Асинхронные задачи для проверки транзакций:

Реализованы через Celery:
Регулярная проверка транзакций со статусом "Ожидание".
Изменение статуса на "Истекла" после 15 минут.
Вызов вебхуков на основе URL пользователей.
Redis используется как брокер задач.
Местоположение: tasks.py

## 6. Админка (Admin Panel)
Графический интерфейс управления:

Flask-Admin создает вкладки:
Дашборд: Карточки статистики и последние транзакции.
Пользователи: CRUD-операции для пользователей.
Транзакции: Список транзакций и изменение их статуса.
Местоположение: admin/

## 7. Уровень настроек (Config Layer)
Хранение конфигураций:

Настройки для Flask, базы данных, Celery и Redis.
Секреты и чувствительные данные вынесены в переменные окружения.
Местоположение: config.py

## Поток данных
Клиент отправляет запрос через API (например, создание транзакции).
API слой обрабатывает запрос и вызывает соответствующий сервис.
Сервисный слой выполняет бизнес-логику и взаимодействует с моделями.
Модель записывает/чтение данных из базы.
Celery задачи выполняют долгосрочные задачи, такие как проверка транзакций.
Вебхуки отправляются внешним системам, когда это требуется.

## Технологический стек
Flask – основной веб-фреймворк.
SQLAlchemy – ORM для управления базой данных.
Flask-Admin – админка.
Flasgger – для документации Swagger.
Celery – фоновые задачи.
Redis – брокер задач для Celery.
